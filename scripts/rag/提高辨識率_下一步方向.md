# 從 verify-report-embed-v2 分出：提高辨識率的下一步方向

報告時間: 2026-02-11 | 總筆數 100，**通過 4**

---

## 一、報告告訴我們什麼（瓶頸在哪）

| 類型 | 數量 | 含義 |
|------|------|------|
| **通過** | 4 | 目前辨識率 4% |
| **幫忙** | 16 | hybrid 有幫到 16 題 |
| **不變** | 34 | 多數為 999/999（兩邊都沒找到正解）或排名沒變 |
| **擾亂** | 8 | **embedding 已有正解，hybrid 反而弄丟或變差** |
| **n/a** | 42 | 只走第一階段，無 embedding_only 比較 |

**可直接轉成通過的**：**擾亂 8 題** — 正解在 embedding 的 Top2～26，但最終 Top1 被 hybrid 洗掉。若「不讓 hybrid 覆蓋這些題」，通過數有機會從 4 → **約 12**（4 + 8）。

**長期要補的**：**不變裡很多 999/999** — DB 缺物種、或名稱/別名對不上，需要補洞與別名。

**干擾項**：**冇拱、八角蓮、白檀、草海桐、鞭枝懸苔** 等反覆當錯誤 Top1，壓制它們可讓正解更容易出頭。

---

## 二、下一步方向（依「提高辨識率」優先）

### 方向 1：止血「擾亂」→ 立刻多幾題通過（建議先做）

- **做什麼**：Hybrid 更保守 — 當 **feature 總分或匹配數很低** 時，**不做合併**，直接沿用第一階段 embedding 結果（並帶上 `embedding_only_plants`）。
- **改哪裡**：`index.js` — 在「合併兩階段結果」前，若 `hybridResult.feature_info` 總分 < 0.15 或 匹配數 < 2，則 `plantResults = preSearchResults`（+ embedding_only_plants），不執行 merge。
- **預期**：擾亂 8 題中多數會保留 embedding 的排名，**通過數有機會從 4 升到約 10～12**。

### 方向 2：萬用條目輕度降權 → 減少霸榜、正解更容易 Top1

- **做什麼**：在 `start_api.py` 對常錯 Top1（冇拱、八角蓮、鞭枝懸苔、草海桐、白檀、南亞孔雀苔、株苔）做 **分數 × 0.88** 再排序。
- **預期**：錯誤 Top1 中由這些條目霸榜的題目減少，部分題正解可進 Top1，**通過數再往上加**。

### 方向 3：補洞與別名 → 讓 999/999 有機會進榜

- **做什麼**：
  - 從報告列出「預期物種」在 DB 可能缺的（如 迷迭香、黑種草、彩葉草、楓樹、麵包樹、水竹芋、呂宋毛蕊木、吊蘭、倒地鈴、矮仙丹、苦林盤…），補進 **tlpg-manual-supplement.jsonl** 或主資料。
  - 在 **verify_from_tlpg_url.js** 的 **COMMON_NAME_SYNONYMS** 加 TLPG 常用名 ↔ DB 名（含 光葉石楠↔石楠、越橘葉蔓榕↔瓜子蔓榕 等已討論過的）。
- **預期**：部分 999/999 會變成「有排名」甚至 Top1，**通過數與可評估題數都提升**。

### 方向 4：第一階段也回傳 embedding_only_plants（觀測用）

- **做什麼**：沒進第二階段時，用 description 前 80 字打一次 `smartSearch`，結果寫入 `plant_rag.embedding_only_plants`。
- **預期**：n/a 從 42 減少，**不直接提高通過率**，但可更清楚看到「只靠 embedding 時正解排第幾」，方便之後調參。

---

## 三、建議執行順序（提高辨識率）

| 順序 | 方向 | 目的 |
|------|------|------|
| 1 | **方向 1**（Hybrid 保守） | 立刻把「embedding 已對、hybrid 弄錯」的 8 題救回，通過數明顯上升 |
| 2 | **方向 2**（萬用降權） | 減少霸榜，讓更多題正解有機會 Top1 |
| 3 | **方向 3**（補洞/別名） | 針對 999/999 與名稱對不上，拉高可通過題數 |
| 4 | **方向 4**（n/a 補齊） | 觀測完整，方便之後迭代 |

---

## 四、一句話總結

- **辨識率卡在兩件事**：  
  (1) **擾亂** — embedding 已經有正解卻被 hybrid 洗掉；  
  (2) **缺洞/霸榜** — DB 缺物種或別名、以及萬用條目常佔 Top1。  
- **下一步優先做「方向 1 + 方向 2」**，再依新一輪報告補方向 3、必要時加方向 4，就能從報告裡分出具體、可執行的提高辨識率路徑。
