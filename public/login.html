<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>登入 | GPS 觸發任務系統</title>
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="icon" type="image/png" href="/images/mascot.png" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
  <header id="mainHeader">
    <div class="header-content" id="headerContent">
      <h1 id="pageTitle">登入</h1>
      <button id="hamburgerBtn" class="hamburger" aria-label="展開選單">&#9776;</button>
      <nav class="main-nav">
        <a href="/index.html">首頁</a>
        <a href="/map.html">地圖頁</a>
        <a href="/tasks-list.html" id="navTasksList">任務列表</a>
        <a href="/user-tasks.html">任務審核</a>
        <a href="/staff-dashboard.html" id="navStaff" style="display:none;">新增任務</a>
        <a href="/user-dashboard.html" id="navUserTasks" style="display:none;">用戶任務管理</a>
        <a href="/products.html" id="navProducts">商品兌換</a>
        <a href="/redeem-tasks.html" id="navRedeem" style="display:none;">兌換商品管理</a>
        <span id="loginUserInfo" style="display:none; color:var(--text-secondary); padding:0.5rem 1rem;"></span>
        <button id="logoutBtn" style="display:none;">登出</button>
      </nav>
    </div>
  </header>

  <main>
    <div class="form-container">
      <h2 class="text-center mb-4" style="color:var(--text-primary);">歡迎回來</h2>
      
      <div class="tab-container" style="box-shadow:none; border: 1px solid #e5e7eb; margin-bottom: 1.5rem;">
        <div class="tab-buttons">
          <button id="tabUser" type="button" class="tab-btn active">一般用戶登入</button>
          <button id="tabStaff" type="button" class="tab-btn">工作人員登入</button>
        </div>
      </div>

      <form id="loginFormUser">
        <div class="form-group">
          <label class="form-label">手機門號</label>
          <input class="form-input" type="text" name="username" required pattern="[0-9]{10}" maxlength="10" autocomplete="username" placeholder="請輸入10碼手機號碼" />
        </div>
        <button type="submit" class="btn btn-primary w-100">登入</button>
        <div id="loginMsgUser" class="text-danger mt-2 text-center" style="min-height: 24px;"></div>
      </form>

      <form id="loginFormStaff" style="display:none;">
        <div class="form-group">
          <label class="form-label">帳號</label>
          <input class="form-input" type="text" name="username" required autocomplete="username" placeholder="請輸入工作人員帳號" />
        </div>
        <div class="form-group">
          <label class="form-label">密碼</label>
          <input class="form-input" type="password" name="password" required autocomplete="current-password" placeholder="請輸入密碼" />
        </div>
        <button type="submit" class="btn btn-primary w-100">登入</button>
        <div id="loginMsgStaff" class="text-danger mt-2 text-center" style="min-height: 24px;"></div>
      </form>
      
      <div class="text-center mt-4" style="border-top: 1px solid #eee; padding-top: 1rem;">
        <span style="color: var(--text-secondary);">還沒有帳號？</span>
        <a href="/register.html" style="color: var(--primary-color); text-decoration: none; font-weight: 500;">立即註冊</a>
      </div>
    </div>
  </main>

  <footer>
    &copy; 2025 GPS 任務系統 - 地方開箱任務遊戲
  </footer>
  <script src="/js/login.js"></script>
  <script>
    // Header（僅處理漢堡選單；權限顯示統一交給 nav-access.js）
    document.getElementById('hamburgerBtn').onclick = function() {
      document.getElementById('headerContent').classList.toggle('open');
    };
    document.querySelectorAll('.main-nav a, .main-nav button').forEach(el => {
      el.addEventListener('click', () => document.getElementById('headerContent').classList.remove('open'));
    });
  </script>
  <script src="/js/nav-access.js"></script>
</body>
</html>
